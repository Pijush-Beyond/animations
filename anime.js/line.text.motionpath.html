<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Motion Path and Text-Line Anmation</title>
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js"
      integrity="sha512-z4OUqw38qNLpn1libAN9BsoDx6nbNFio5lA6CuTp9NlK83b89hgyCVq+N5FdBJptINztxn1Z3SaKSKUS5UP60Q=="
      crossorigin="anonymous"
    ></script>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-eOJMYsd53ii+scO/bJGFsiCZc+5NDVN2yr8+0RDqr0Ql0h+rP48ckxlpbzKgwra6"
      crossorigin="anonymous"
    />
  </head>
  <body
    class="d-flex justify-content-center align-items-center vh-100 overflow-hidden bg-dark"
  >
    <div class="bg-dark position-relative">
      <div
        id="light"
        class="position-absolute rounded-circle"
        style="width: 10px; height: 10px; background-color: rgb(29, 202, 29); top: -5px; left: -5px;box-shadow: rgb(29, 202, 29) 1px -1px 5px 4px;"
      ></div>
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 451.65 115.59" height="173.385" width="677.475">
        <defs>
          <style>
            .cls-1 {
              fill: none;
              stroke: rgb(29, 202, 29);
              stroke-miterlimit: 10;
            }
          </style>
        </defs>
        <g id="Layer_2" data-name="Layer 2">
          <g id="welcome">
            <path
              class="cls-1"
              d="M9.69,52.62C-2.26,69.3-2.08,113.25,7.46,115c6.3,1.18,14.78-18.19,18.28-16.5,2.66,1.29-2.29,12.46,1.78,15.61,3.6,2.78,12.82-1.79,18.73-7.14,17.57-15.89,18.59-50,8-55.73a9.21,9.21,0,0,0-6.36-.67A3.49,3.49,0,0,0,45.75,56C47.1,58,48.9,59.5,49.9,62.77c6.41,21-10.25,43.6-13.91,42.46-2.75-.85,1.64-15.22-3.12-17.39-5.76-2.62-17.73,15.71-20.95,13.82-4.7-2.75,18.82-42.92,9.81-50.38C18.68,48.76,11.82,49.64,9.69,52.62Z"
            />
            <path
              class="cls-1"
              d="M71,52.78c-5,5.88-5.25,17.63-5.82,41.12-.28,11.64.2,14.25,2.26,16.34,8.21,8.34,33.81.93,36.05-9.58,1.14-5.3-3.53-12.1-6.19-11.83-1.79.19-1.74,3.46-4.51,6.76-5.19,6.2-15.51,6.86-16.34,5.07s1.38-21,16.34-18c2.53.49,4.82-8.48,2.82-10.71-3-3.38-12.39,5.15-16.91,1.69-3.39-2.6-3.38-11.31.81-15.84,5.94-6.41,17.46-1.35,20.6-7.26a6.29,6.29,0,0,0-.56-6.76C95.51,39.35,79.34,42.94,71,52.78Z"
            />
            <path
              class="cls-1"
              d="M110.84,43.76c-2.93,2.39-7.67,8-3.76,48.45,1.09,11.3,1.72,13.49,3.76,15.4,10,9.42,39.41-1.4,40.19-11.26.29-3.7-3.37-8-7.52-9-9.64-2.31-18,14.39-22.91,12.4-8.4-3.4,8.42-54.49-1.5-59C116.16,39.43,112.07,42.76,110.84,43.76Z"
            />
            <path
              class="cls-1"
              d="M187.49,40.35c-7.67,1.06-24.69,3.4-32.49,17.87-8.15,15.11-3.11,37.65,11.91,45.5,13.7,7.16,34.09,1.27,37.37-8.67,2.32-7-3.6-16.92-7.58-16.79-3.21.11-3.1,6.65-8.67,10.29-6.9,4.52-19.45,2.56-23.28-3.79-5.55-9.16,6.58-28.3,18.41-29.79C191,54,195.84,61.1,201,58.22c4.46-2.46,6.38-10.76,3.25-15.16C201,38.49,193.37,39.54,187.49,40.35Z"
            />
            <path
              class="cls-1"
              d="M234.57,42.2C223,42.05,212.1,57.44,210.2,71.45c-1.87,13.73,3.89,33.21,17.87,36.28,12.43,2.74,25.58-8.79,29.79-20.58C264.77,67.77,249.35,42.4,234.57,42.2Z"
            />
            <path
              class="cls-1"
              d="M232.4,57.37c-6.57.88-12.78,26-4.33,31.95,4.38,3.07,12.72,1,16.25-3.79C251.43,76,238.53,56.54,232.4,57.37Z"
            />
            <path
              class="cls-1"
              d="M264.35,104.49c-8.71-5.43.16-33.6,5.42-46.58,2.27-5.6,8.22-20.3,12.46-19.5,5.86,1.11,3.82,31.08,7.58,31.41S296.38,39.15,305,38.41c5.35-.46,10.23,11,10.84,12.46,10.35,24.37-6.37,56.16-11.92,55.24-1.56-.26-2.23-3.09-3-6.23-4.25-17.86,7-35.52,6.1-36s-9.26,19.73-16.66,18.95c-6.89-.73-10-19.37-11.91-18.95-2.48.54,7,31.78-4.37,39.7C271.29,105.51,267.08,106.18,264.35,104.49Z"
            />
            <path
              class="cls-1"
              d="M335.23,45.07c-5,5.88-5.26,17.63-5.82,41.13-.28,11.63.19,14.25,2.25,16.33,8.21,8.35,33.81.93,36.06-9.57,1.13-5.31-3.54-12.11-6.2-11.83-1.79.18-1.74,3.45-4.51,6.76-5.19,6.2-15.51,6.85-16.34,5.07s1.38-21,16.34-18c2.53.49,4.82-8.48,2.82-10.71-3-3.38-12.39,5.15-16.9,1.69-3.4-2.6-3.38-11.31.8-15.83,5.94-6.42,17.46-1.36,20.61-7.27a6.3,6.3,0,0,0-.57-6.76C359.71,31.64,343.55,35.23,335.23,45.07Z"
            />
            <path
              class="cls-1"
              d="M372.43,16.48c17.5,25.43,15.83,64.69,21.76,64.76,2.56,0,4.18-7.25,6-15.83,4.46-20.7,10.36-48-.78-59.35C390-3.51,370.84.69,369.21,8,368.53,11.08,371,14.43,372.43,16.48Z"
            />
            <path
              class="cls-1"
              d="M393.94,91c-3.93-.94-7.7,2.06-8.64,6.39-1.21,5.58,2.57,11.92,7.33,12.41,3.62.37,7.1-2.7,7.82-7.18C401.28,97.55,398.29,92.07,393.94,91Z"
            />
            <path
              class="cls-1"
              d="M446.77,18.29C425.89,41,422.07,80.13,416.19,79.38c-2.54-.33-3.13-7.76-3.77-16.52-1.53-21.12-3.55-49,9.06-58.66,10.64-8.16,29.07-1.33,29.66,6.14C451.39,13.49,448.46,16.45,446.77,18.29Z"
            />
            <path
              class="cls-1"
              d="M415.07,89.11c4-.39,7.34,3.11,7.66,7.53.42,5.69-4.21,11.44-9,11.26-3.63-.13-6.65-3.65-6.74-8.19C406.89,94.54,410.61,89.53,415.07,89.11Z"
            />
          </g>
        </g>
      </svg>
    </div>

    <div class="position-fixed bottom-0 end-0 btn-group">
      <button class="btn btn-outline-primary" data-role="play">Play</button>
      <button class="btn btn-outline-primary" data-role="pause">Pause</button>
      <button class="btn btn-outline-primary" data-role="restart">
        Restart
      </button>
    </div>

    <script>
      const buttonPlay = document.querySelector('button[data-role="play"]');
      const buttonPause = document.querySelector('button[data-role="pause"]');
      const buttonRestart = document.querySelector(
        'button[data-role="restart"]'
      );

      const target = document.querySelectorAll("svg path");
      const light = document.querySelector("#light");

      const animation = anime.timeline({
        direction: "alternate",
        loop: true,
        easing: "easeInOutSine",
      });

      const paths = [...document.querySelectorAll("svg path")];

      const maxPathLen = Math.max(...paths.map(p=> {
        p.len = Number(p.getTotalLength());
        return p.len;
      }))

      const maxTime = 1500;

      for (let path of paths) {
        const pathToFollow = anime.path(path);
        animation
          .add({
            strokeDashoffset: [anime.setDashoffset, 0],
            targets: path,
            duration: maxTime*(path.len/maxPathLen),
            delay: (el,i,l)=> path[i-1]?maxTime*(path[i-1].len/maxPathLen):0,
          })
          .add(
            {
              targets: light,
              translateX: pathToFollow("x"),
              translateY: pathToFollow("y"),
              rotate: pathToFollow("angle"),
              easing: "easeInOutSine",
              duration: maxTime*(path.len/maxPathLen),
            },
            `-=${maxTime*(path.len/maxPathLen)}`
          );
      }

      buttonPlay.addEventListener("click", animation.play);
      buttonPause.addEventListener("click", animation.pause);
      buttonRestart.addEventListener("click", animation.restart);
    </script>
  </body>
</html>
